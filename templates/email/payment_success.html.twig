{% extends 'email/base.html.twig' %}

{% block title %}{{ 'email.payment_success.title'|trans }}{% endblock %}

{% block content %}
    <p>{{ 'email.payment_success.greeting'|trans({'%email%': user.email}) }},</p>
    
    <p>{{ 'email.payment_success.message'|trans }}</p>
    
    <div class="receipt">
        <h3>{{ 'email.payment_success.receipt.title'|trans }}</h3>
        <div class="row">
            <span>{{ 'email.payment_success.receipt.transaction_id'|trans }}:</span>
            <strong>{{ payment.chargeId }}</strong>
        </div>
        <div class="row">
            <span>{{ 'email.payment_success.receipt.date'|trans }}:</span>
            <strong>{{ payment.createdAt|date('M d, Y') }}</strong>
        </div>
        <div class="row">
            <span>{{ 'email.payment_success.receipt.plan'|trans }}:</span>
            <strong>{{ subscription.plan.name }}</strong>
        </div>
        <div class="row">
            <span>{{ 'email.payment_success.receipt.amount'|trans }}:</span>
            <strong>{{ payment.formattedAmount }}</strong>
        </div>
        {% if payment.cardBrand %}
        <div class="row">
            <span>{{ 'email.payment_success.receipt.payment_method'|trans }}:</span>
            <strong>{{ payment.cardBrand }} •••• {{ payment.cardLastFour }}</strong>
        </div>
        {% endif %}
        <div class="row">
            <span>{{ 'email.payment_success.receipt.next_billing'|trans }}:</span>
            <strong>{{ subscription.nextBillingDate|date('M d, Y') }}</strong>
        </div>
    </div>
    
    <p>{{ 'email.payment_success.active_until'|trans({'%date%': subscription.currentPeriodEnd|date('M d, Y')}) }}</p>
    
    <div style="text-align: center;">
        <a href="{{ url('subscription_current') }}" class="button">{{ 'email.payment_success.button'|trans }}</a>
    </div>
    
    <p>{{ 'email.contact_support'|trans }}</p>
{% endblock %}
