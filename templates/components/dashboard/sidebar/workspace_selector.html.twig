{# Workspace Selector Component #}
{# Parameters: none (can be extended to accept workspace data) #}

	<div class="border-t border-slate-100 dark:border-slate-700 p-3"> <div class="dropdown dropdown-top w-full">
		<div tabindex="0" role="button" class="w-full flex items-center justify-between px-1 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors">
			<div class="flex items-center gap-3">
				<div class="w-8 h-8 rounded-lg bg-purple-600 flex items-center justify-center text-gray-600 dark:text-white shrink-0">
					<span class="font-bold text-xs text-white">{{ current_team ? current_team.name|first|upper : '?' }}</span>
				</div>
				<div class="text-start sidebar-text transition-all duration-300 ease-in-out whitespace-nowrap opacity-0 -translate-x-2 pointer-events-none [.drawer-toggle:checked~.drawer-side_&]:opacity-100 [.drawer-toggle:checked~.drawer-side_&]:translate-x-0 [.drawer-toggle:checked~.drawer-side_&]:pointer-events-auto">
					<p class="text-sm font-semibold text-slate-900 dark:text-slate-100">{{ current_team ? current_team.name : 'No Workspace' }}</p>
					<p class="text-xs text-slate-500 dark:text-slate-400">{{ 'team.workspace'|trans }}</p>
				</div>
			</div>
			<svg class="w-4 h-4 text-slate-400 transition-all dropdown-icon sidebar-text duration-300 ease-in-out opacity-0 -translate-x-2 pointer-events-none [.drawer-toggle:checked~.drawer-side_&]:opacity-100 [.drawer-toggle:checked~.drawer-side_&]:translate-x-0 [.drawer-toggle:checked~.drawer-side_&]:pointer-events-auto" fill="none" stroke="currentColor" viewbox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
			</svg>
		</div>

		<ul tabindex="0" class="dropdown-content z-100 menu p-2 shadow-lg bg-white dark:bg-base-200 rounded-box w-60 [.drawer-toggle:checked~.drawer-side_&]:w-full mb-2 border border-slate-100 dark:border-slate-700">
			{% for member in app.user.teamMembers %}
				{% set team = member.team %}
				{% set isActive = current_team and current_team.id == team.id %}
				<li>
					<a href="{{ path('app_workspace_switch', {id: team.id}) }}" class="{{ isActive ? 'active' : '' }}">
						<div class="w-8 h-8 rounded-lg {{ isActive ? 'bg-purple-600 text-gray-600 dark:text-white' : 'bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400' }} flex items-center justify-center">
							<span class="font-bold text-xs text-white">{{ team.name|first|upper }}</span>
						</div>
						<div>
							<p class="text-sm font-medium {{ isActive ? 'text-gray-600 dark:text-white' : 'text-slate-900 dark:text-slate-100' }}">{{ team.name }}</p>
							<p class="text-xs {{ isActive ? 'text-gray-600 dark:text-white' : 'text-slate-500 dark:text-slate-400' }}">{{ 'team.workspace'|trans }}</p>
						</div>
						{% if isActive %}
							<svg class="w-4 h-4 text-gray-600 dark:text-white ms-auto" fill="none" stroke="currentColor" viewbox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
							</svg>
						{% endif %}
					</a>
				</li>
			{% endfor %}

			<div class="divider my-1"></div>

			<li>
				<a href="{{ path('app_team_index') }}">
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
					</svg>
					{{ 'dashboard.manage_teams'|trans }}
				</a>
			</li>
			<li>
				<a href="{{ path('app_team_new') }}" class="text-purple-600 dark:text-purple-400">
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
					</svg>
					{{ 'team.add_new_workspace'|trans }}
				</a>
			</li>
		</ul>
	</div>
</div>
